<!DOCTYPE html>
<html>
<head>
    <title>Simple Tableau WDC</title>
    <script src="https://connectors.tableau.com/libs/tableauwdc-2.3.latest.js"></script>
    <script>
        (function() {
            var myConnector = tableau.makeConnector();

           myConnector.getSchema = function(schemaCallback) {
            var cols = [
                { id: "ID", dataType: tableau.dataTypeEnum.int },
                { id: "name", dataType: tableau.dataTypeEnum.string },
                { id: "url", dataType: tableau.dataTypeEnum.string }
            ];
        
            var tableSchema = {
                id: "JSONFeed",
                alias: "JSON data from GitHub",
                columns: cols
            };
        
            schemaCallback([tableSchema]);
        };

           myConnector.getData = function(table, doneCallback) {
    var jsonUrls = [
        'https://github.com/user/repo/file1.json',
        'https://github.com/user/repo/file2.json'
    ];

    jsonUrls.forEach(url => {
        fetch(url)
            .then(response => response.json())
            .then(jsonData => {
                var tableData = [];

                // Iterate over each entry in the JSON file
                for (var i = 0, len = jsonData.length; i < len; i++) {
                    tableData.push({
                        "ID": jsonData[i].ID,
                        "name": jsonData[i].name,
                        "url": jsonData[i].url
                    });
                }

                table.appendRows(tableData);
                doneCallback();
            })
            .catch(error => console.log(error));
    });
};

            tableau.registerConnector(myConnector);
        })();
    </script>
</head>
<body>
    <button type="button" onclick="tableau.submit()">Get Data</button>
</body>
</html>
